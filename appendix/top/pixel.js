!function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var r=function(){function r(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"App";e(this,r),this.os=n,this.bridge=t,this.windowAsAny=window}var t,o,i;return t=r,o=[{key:"resolveMethod",value:function(e){var n,r,t,o,i=this;if("android"===this.os){if(void 0===(null===(n=this.windowAsAny[this.bridge])||void 0===n?void 0:n[e]))throw new Error("window[".concat(this.bridge,"][").concat(e,"] does not exist"));return function(n,r){var t=JSON.stringify({callback:n,parameter:r[0]});i.windowAsAny[i.bridge][e](t)}}if(void 0===(null===(o=null===(t=null===(r=this.windowAsAny.webkit)||void 0===r?void 0:r.messageHandlers)||void 0===t?void 0:t[e])||void 0===o?void 0:o.postMessage))throw new Error("window.webkit.messageHandlers[".concat(e,"].postMessage does not exist"));return function(n,r){var t=JSON.stringify({callback:n,parameter:r[0]});i.windowAsAny.webkit.messageHandlers[e].postMessage(t)}}},{key:"invoke",value:function(e){for(var n=this,t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return new Promise((function(t,i){var a="".concat(e,"-").concat(r.callbackIdentifier++);n.windowAsAny[a]=function(e){var r=void 0!==e?JSON.parse(e):void 0;void 0!==(null==r?void 0:r["error-".concat(a)])?i(new Error(r["error-".concat(a)])):t(r),delete n.windowAsAny[a]},n.resolveMethod(e)(a,o)}))}}],o&&n(t.prototype,o),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),r}();function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){var n=[];for(var r in e){var o=e[r];if(e.hasOwnProperty(r)&&void 0!==o){var i=encodeURIComponent(r);if(t(o))for(var a=0;a<o.length;a++)n.push("".concat(i,"=").concat(encodeURIComponent(String(o[a]))));else n.push("".concat(i,"=").concat(encodeURIComponent(String(o))))}}return n.join("&")}function i(e){try{var n=window[e],r="__storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(e){return!1}}function a(e){try{for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var t=n[r].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").split("=");if(t[0]===e)return decodeURIComponent(t[1])}}catch(e){}}function c(e){try{if(i("localStorage"))return window.localStorage.getItem(e)||void 0}catch(e){}}function s(e,n){try{document.cookie="".concat(e,"=").concat(encodeURIComponent(n),"; path=/; max-age=").concat(63072e3),i("localStorage")&&window.localStorage.setItem(e,n)}catch(e){}}function u(e){var n={name:e.name,message:e.message,fileName:e.fileName,stack:e.stack,url:location.href,userAgent:navigator.userAgent};(new Image).src="https://i.smartnews-ads.com/pe?b=".concat(encodeURIComponent(JSON.stringify(n)))}r.callbackIdentifier=0;var d=0;function l(e,n){var r;return null===(r=new RegExp("[&?]".concat(n,"=([^&]+)")).exec(e))||void 0===r?void 0:r[1]}function w(){return new r("ios","SmartNewsAds").invoke("retrieveUUID").catch((function(){return new r("android","SmartNewsAds").invoke("retrieveUUID")})).catch((function(){return r=window.parent===window.self,null!==(e=window.webkit)&&void 0!==e&&null!==(n=e.messageHandlers)&&void 0!==n&&n.UUIDResolver&&r?new Promise((function(e){var n,r,t,o="_smartnews_ads_legacy_callback_".concat(d++);window[o]=function(n){delete window[o],e(n)},null===(n=window.webkit)||void 0===n||null===(r=n.messageHandlers)||void 0===r||null===(t=r.UUIDResolver)||void 0===t||t.postMessage(o)})):Promise.reject(new Error("UUIDResolver does not exist"));var e,n,r})).catch((function(){return Promise.resolve(null)}))}var v="snexid",f="snuuid";function m(e,n,r,t){var i,d={id:e,t:Math.floor((new Date).valueOf()/1e3),url:location.href,referrer:document.referrer,e:n,v:this.version,pv:"8.15.0",rid:t};for(var m in r)r.hasOwnProperty(m)&&(d["d[".concat(m,"]")]=r[m]);var p=null!==(i=function(e){var n=a(e);return void 0!==n?n:c(e)}(v))&&void 0!==i?i:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}));s(v,p),d.exid=p;var h=function(){var e=l(location.search,"snuuid");if(e)return{uuid:e,uuidSrc:"url"};var n=l(document.referrer,"snuuid");if(n)return{uuid:n,uuidSrc:"referrer"};var r=a(f);if(r)return{uuid:r,uuidSrc:"cookie"};var t=c(f);return t?{uuid:t,uuidSrc:"localStorage"}:null}();if(null!==h&&(s(f,h.uuid),d.uuid=h.uuid,d.uuidSrc=h.uuidSrc),!("Promise"in window)){var g=o(d);return(new Image).src="https://i.smartnews-ads.com/p?".concat(g),(new Image).src="https://i6.smartnews-ads.com/smallest.png?".concat(g),d}return Promise.race([w(),new Promise((function(e){window.setTimeout((function(){return e(null)}),1e3)}))]).then((function(e){null!==e&&(s(f,e),d.uuid=e,d.uuidSrc="app");var n=o(d);return(new Image).src="https://i.smartnews-ads.com/p?".concat(n),(new Image).src="https://i6.smartnews-ads.com/smallest.png?".concat(n),d})).catch((function(e){return u(e),d}))}try{!function(){if(void 0===window.SmartnewsAds||void 0===window.SmartnewsAds.p)throw new Error("SmartnewsAds does not defined.");var e=window.SmartnewsAds.p;if(e.callMethod=m,e.queue){for(var n in e.queue)e.queue.hasOwnProperty(n)&&e.callMethod.apply(e,e.queue[n]);e.queue.length=0}}()}catch(e){u(e)}}();
